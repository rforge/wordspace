%% \documentclass[handout,t]{beamer} % HANDOUT
%% \documentclass[handout,notes=show,t]{beamer} % NOTES
\documentclass[t]{beamer} % SLIDES
\usepackage{etex}

\usetheme{DSM}
\usepackage{beamer-tools-dsm}

\input{lib/math}  % basic mathematical notation
\input{lib/text}  % some useful macros for plain text
\input{lib/stat}  % notation for probability theory and statistics
\input{lib/vector}% convenience macros for vectors and matrices

\input{local/config} % local adjustments to configuration and macros

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \input{pages/new} % -- input only slide set you're currently working on
% \input{pages/naacl_3_use_evaluation}

\begin{frame}
  \frametitle{Building a distributional model}
  % \framesubtitle{}

  \ungap[2]
  \begin{center}
    pre-processed corpus with linguistic annotation\\
    $\Downarrow$\\
    term-context \vs\ term-term matrix\\
    $\swarrow$ \hspace{3cm} $\searrow$\\
    define targets \& contexts \hspace{2cm} define targets \& features\\
    $\Downarrow$ \hspace{6cm} $\Downarrow$ \\
    \hspace{.5cm} type of context \hspace{1.5cm} type \& size of co-occurrence window\\
    $\searrow$ \hspace{3cm} $\swarrow$\\
    geometric \vs\ probabilistic interpretation\\
    $\Downarrow$\\
    feature scaling\\
    $\Downarrow$\\
    similarity/distance measure + normalisation\\
    $\Downarrow$\\
    dimensionality reduction
  \end{center}
\end{frame}

\begin{frame}
  \frametitle{Building a distributional model}
  % \framesubtitle{}
  
  \footnotesize\centering
  \begin{tikzpicture}
    \node[diagram box=black] (corpus) at (0, 6.5) {pre-processed corpus with linguistic annotation} ;
    \node[diagram box] (tc_terms) at (-3, 5) {define target terms} ;
    \node[diagram box] (tt_terms) at (+3, 5) {define target \& feature terms} ;
    \node[diagram box] (tc_context) at (-3, 4) {context tokens or types} ;
    \node[diagram box] (tt_span) at (+3, 4) {type \& size of co-occurrence} ;
    \node[diagram box] (geom_prob) at (0, 3) {} ;
    \node[diagram box] (scoring) at (-2, 2) {feature scaling} ;
    \node[diagram box] (metric) at (-2, 1) {similarity/distance measure + normalization} ;
    \node[diagram box] (dimred) at (-2, 0) {dimensionality reduction} ;
    \node[diagram ghost] (prob) at (2, 2) {} ;
    \draw[diagram arrow=counterpoint] (corpus) -- node[left=1.5em] {term-context matrix} (tc_terms) ;
    \draw[diagram arrow=counterpoint] (corpus) -- node[right=1.5em] {term-term matrix} (tt_terms) ;
    \draw[diagram arrow] (tc_terms) -- (tc_context) ;
    \draw[diagram arrow] (tt_terms) -- (tt_span) ;
    \draw[diagram arrow] (tc_context) -- (geom_prob) ;
    \draw[diagram arrow] (tt_span) -- (geom_prob) ;
    \draw[diagram arrow=counterpoint] (geom_prob) -- node[left=1.5em] {geometric analysis} (scoring) ;
    \draw[diagram arrow=counterpoint] (geom_prob) -- node[right=1.5em] {probabilistic analysis} (prob) ;
    \draw[diagram arrow] (scoring) -- (metric) ;
    \draw[diagram arrow] (metric) -- (dimred) ;
  \end{tikzpicture}
\end{frame}


\begin{frame}<beamer:10| handout:10>[label=DSM_pipeline]
  \frametitle{Building a distributional model}
  % \framesubtitle{}
  
  \footnotesize\centering
  \begin{tikzpicture}
    \node[diagram box=black] (corpus) at (0, 6.5) {pre-processed corpus with linguistic annotation} ;
    \visible<beamer:2-| handout:2->{
      \node[diagram box] (tt_terms) at (+3, 5) {define target \& feature terms} ;
      \draw[diagram arrow=counterpoint] (corpus) -- node[right=1.5em] {term-term matrix} (tt_terms) ;
    }
    \visible<beamer:3-| handout:3->{
      \node[diagram box] (tt_span) at (+3, 4) {type \& size of co-occurrence} ;
      \draw[diagram arrow] (tt_terms) -- (tt_span) ;
    }
    \visible<beamer:4-| handout:4->{
      \node[diagram box] (tc_terms) at (-3, 5) {define target terms} ; 
      \draw[diagram arrow=counterpoint] (corpus) -- node[left=1.5em] {term-context matrix} (tc_terms) ;
    }
    \visible<beamer:5-| handout:5->{
      \node[diagram box] (tc_context) at (-3, 4) {context tokens or types} ;
      \draw[diagram arrow] (tc_terms) -- (tc_context) ;
    }
    \visible<beamer:6-| handout:6->{
      \node[diagram box] (geom_prob) at (0, 3) {} ;
      \draw[diagram arrow] (tt_span) -- (geom_prob) ;
      \draw[diagram arrow] (tc_context) -- (geom_prob) ;
    }
    \visible<beamer:7-| handout:7->{
      \node[diagram ghost] (prob) at (2, 2) {} ;
      \draw[diagram arrow=counterpoint] (geom_prob) -- node[right=1.5em] {probabilistic analysis} (prob) ;
    }
    \visible<beamer:8-| handout:8->{
      \node[diagram box] (scoring) at (-2, 2) {feature scaling} ;
      \draw[diagram arrow=counterpoint] (geom_prob) -- node[left=1.5em] {geometric analysis} (scoring) ;
    }
    \visible<beamer:9-| handout:9->{
      \node[diagram box] (metric) at (-2, 1) {similarity/distance measure + normalization} ;
      \draw[diagram arrow] (scoring) -- (metric) ;
    }
    \visible<beamer:10-| handout:10->{
      \node[diagram box] (dimred) at (-2, 0) {dimensionality reduction} ;
      \draw[diagram arrow] (metric) -- (dimred) ;
    }
  \end{tikzpicture}
\end{frame}

\againframe<beamer:3| handout:3>{DSM_pipeline}
\againframe<beamer:5,8| handout:5>{DSM_pipeline}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% References (if any)

\frame[allowframebreaks]{
  \frametitle{References}
  \bibliographystyle{natbib-stefan}
  \begin{scriptsize}
    \bibliography{dsm,stefan-literature,stefan-publications}
  \end{scriptsize}
}

\end{document}

